<% layout("/layouts/boilerplate") %>
<style>
  #flex{
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
  }
  /* #lbtn, #rbtn{
    display: none;
  } */
  #lbtn, #rbtn i{
    font-size: 2px;
  }
    /* Media-query */
    /* @media (min-width: 768px) { */
  #lbtn, #rbtn{
    display: block;
  }
  #lbtn, #rbtn{
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 30px;
    min-height: 30px;
    padding: 1px;
    border-radius: 50%;
    margin-right: 10px;
    background-color: white;
    border: 1px solid rgba(128, 128, 128, 0.398);
  }
  #rbtn{
    margin-left: 10px;
    margin-right: 0;
  }
  
/* } */

  #filter{
    display: flex;
    transition:  all 1s ease-out;
    overflow-x: scroll;
    scroll-behavior: smooth;
    overscroll-behavior-inline: contain;
    scroll-snap-type: initial mandatory;
    width: 40rem;
    gap: 19px;
    scrollbar-width: none;
  }
  .filter{
    text-align: center;
    opacity: 0.7;
    /* width: 15rem; */
    gap: 5px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    text-wrap: nowrap;

    /* margin-top: 2rem; */
  }
  .filter:hover{
      opacity: 1;
      cursor: pointer;
    }
  .filter p {
      margin-bottom: 0;
      font-size: 15px;
    }
  .filter img{
      width: 18px;
    }
  .tax-info{
    opacity: .6;
    display: none;
  }  
  .tax-toggle{
    border-radius: 14px;
    display: flex;
    padding: 10px 15px;
    border: 1.5px solid rgba(128, 128, 128, 0.438);
    margin-left: 1.4rem;
    font-size: 16px;
  }

  @media (max-width: 1200px) {
  .tax-toggle{
    margin-left: 19px;
  }
  #filter{
      width: 30rem;
    }
}
  @media (max-width: 992px) {
    .tax-toggle{
      margin-left: 10px;
      font-size: 15px;
    }
    #filter{
      width: 20rem;
    }
  }
  @media (max-width: 768px) {
    .tax-toggle{
      display: none;
    }
    #filter{
      width: auto;
    }
  }
</style>
<body>
  <br>
    <!-- <h2><b>All Listing</b></h2><br> -->
    <!-- <form action="/listings/new" method="get">
        <button>Create New Route</button>
    </form> -->
    <div id="flex">
    <div id="lbtn">
      <i class="fa-solid fa-chevron-left"></i>
    </div>
    <div id="filter">
        <div class="filter">
          <img src="https://a0.muscache.com/pictures/3726d94b-534a-42b8-bca0-a0304d912260.jpg" alt="">
          <p>Trending</p>
        </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/7630c83f-96a8-4232-9a10-0398661e2e6f.jpg" alt="">
        <p>Room</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/8e507f16-4943-4be9-b707-59bd38d56309.jpg" alt="">
        <p>Island</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/7630c83f-96a8-4232-9a10-0398661e2e6f.jpg" alt="">
        <p>Room</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/8b44f770-7156-4c7b-b4d3-d92549c8652f.jpg" alt="">
        <p>Arctic</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/50861fca-582c-4bcc-89d3-857fb7ca6528.jpg" alt="">
        <p>Design</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/bcd1adc0-5cee-4d7a-85ec-f6730b0f8d0c.jpg" alt="">
        <p>Bechfront</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/ee9e2a40-ffac-4db9-9080-b351efc3cfc4.jpg" alt="">
        <p>Tropical</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/1d477273-96d6-4819-9bda-9085f809dad3.jpg" alt="">
        <p>A-frame</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/51f5cf64-5821-400c-8033-8a10c7787d69.jpg" alt="">
        <p>Hanoks</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/c027ff1a-b89c-4331-ae04-f8dee1cdc287.jpg" alt="">
        <p>Trulli</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/ca25c7f3-0d1f-432b-9efa-b9f5dc6d8770.jpg" alt="">
        <p>Camping</p>
      </div>
      <div class="filter">
        <img src="https://a0.muscache.com/pictures/10ce1091-c854-40f3-a2fb-defc2995bcaf.jpg" alt="">
        <p>Beach</p>
      </div>
    </div>
    <div id="rbtn">
      <i class="fa-solid fa-chevron-right"></i>
    </div>

    <div class="tax-toggle">
      <div class="form-check-reverse form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked">
        <label class="form-check-label" for="flexSwitchCheckChecked">Display total after taxes</label>
      </div>
    </div>
  </div>

    
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-4">
        <% for(let listing of allListings) { %>
            <a href="/listings/<%= listing.id%>" class="listing_links">
                <div class="card cols listing-card">
                  <div class="image">
                  <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image" style="height: 20rem;">
                  </div>  
                    <div class="card-img-overlay"></div>
                    <div class="card-body">
                      <p class="card-text">
                        <b><%= listing.title %></b> <br>
                      &#8377; <%=listing.price.toLocaleString("en-IN")%>/night 
                      <i class="tax-info"> &nbsp; +18% GST</i>
                      </p>
                      
                    </div>
                  </div>
            </a>
        <% } %>
    </div>
</body>
<script>
const lbtn = document.getElementById("lbtn");
const rbtn = document.getElementById("rbtn");
let tax = document.getElementById('flexSwitchCheckChecked') 

lbtn.onclick = () => {
  document.getElementById("filter").scrollLeft += -120;
};
rbtn.onclick = () => {
  document.getElementById("filter").scrollLeft += 120;
};

tax.addEventListener("click", ()=>{
  let taxinfo = document.getElementsByClassName('tax-info')
  for(info of taxinfo){
    if(info.style.display != "inline"){
    info.style.display = "inline";
    }else{
    info.style.display = "none"
    }
  }
})
</script>
